---
title: แก้ไขปัญหาโพรโทคอล OAuth 2.0 และ OpenID Connect
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 03/17/2021
audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "9776"
- "9004342"
ms.openlocfilehash: d2f14d4d16bea890b564cdb9bd9ac3875c28d115
ms.sourcegitcommit: c08bed4071baa3bb5879496df3ed44fb828c8367
ms.translationtype: MT
ms.contentlocale: th-TH
ms.lasthandoff: 03/19/2021
ms.locfileid: "51037696"
---
# <a name="troubleshoot-oauth-20-and-openid-connect-protocols"></a><span data-ttu-id="49af7-102">แก้ไขปัญหาโพรโทคอล OAuth 2.0 และ OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="49af7-102">Troubleshoot OAuth 2.0 and OpenID Connect protocols</span></span>

<span data-ttu-id="49af7-103">เมื่อต้องการแก้ไขปัญหา OAuth 2.0 และ OpenID Connect ให้ปฏิบัติตามขั้นตอนที่แนะนาต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="49af7-103">To resolve OAuth 2.0 and OpenID Connect issues, perform the following recommended steps:</span></span>

<span data-ttu-id="49af7-104">ดูบทความต่อไปนี้ที่เกี่ยวข้องกับการกําหนดค่าและการแก้ไขปัญหาโพรโทคอล OAuth 2.0 และ OpenID Connect:</span><span class="sxs-lookup"><span data-stu-id="49af7-104">Refer to the following articles that are related to configuration and troubleshooting OAuth 2.0 and OpenID Connect protocols:</span></span>

- <span data-ttu-id="49af7-105">แพลตฟอร์มข้อมูลเฉพาะตัวของ Microsoft และโฟลว์รหัสการรับรองความถูกต้อง [OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) - บทความนี้อธิบายวิธีการเขียนโปรแกรมกับโฟลว์การให้รหัส **(PKCE)** โดยตรงในแอปพลิเคชันของคุณ โดยใช้ภาษาใดก็ได้</span><span class="sxs-lookup"><span data-stu-id="49af7-105">[Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) - This article describes how to program directly against the **code grant (PKCE) flow** in your application, using any language.</span></span>
- <span data-ttu-id="49af7-106">[แพลตฟอร์มข้อมูลเฉพาะตัวของไมโครซอฟท์และข้อมูลเฉพาะตัวของไคลเอ็นต์ OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) - บทความนี้อธิบายวิธีการเขียนโปรแกรมโดยตรงกับโฟลว์ข้อมูล **เฉพาะตัวของไคลเอ็นต์** ในแอปพลิเคชันของคุณ</span><span class="sxs-lookup"><span data-stu-id="49af7-106">[Microsoft identity platform and the OAuth 2.0 client credentials flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) - This article describes how to program directly against the **client credentials flow** in your application.</span></span>
- <span data-ttu-id="49af7-107">[แพลตฟอร์มข้อมูลเฉพาะตัวของไมโครซอฟท์และข้อมูลเฉพาะตัวของรหัสผ่านเจ้าของทรัพยากร OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) - บทความนี้อธิบายวิธีการเขียนโปรแกรมโดยตรงกับโฟล **ว์ ROPC** ในแอปพลิเคชันของคุณ</span><span class="sxs-lookup"><span data-stu-id="49af7-107">[Microsoft identity platform and OAuth 2.0 Resource Owner Password Credentials](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) - This article describes how to program directly against the **ROPC flow** in your application.</span></span>
    - <span data-ttu-id="49af7-108">แพลตฟอร์มข้อมูลเฉพาะตัวของ Microsoft สนับสนุนเฉพาะ ROPC ของผู้เช่า Azure AD เท่านั้น และไม่รองรับบัญชีส่วนบุคคล</span><span class="sxs-lookup"><span data-stu-id="49af7-108">The Microsoft identity platform only supports ROPC for Azure AD tenants, and not for personal accounts.</span></span> <span data-ttu-id="49af7-109">ซึ่งหมายความว่าคุณต้องใช้จุดสิ้นสุดเฉพาะผู้เช่า **( https://login.microsoftonline.com/{TenantId_or_Name})\*\*\*\*หรือจุดสิ้นสุด** องค์กร)</span><span class="sxs-lookup"><span data-stu-id="49af7-109">This means that you must use a tenant-specific endpoint **(https://login.microsoftonline.com/{TenantId_or_Name})** or the **organizations** endpoint.</span></span>
    - <span data-ttu-id="49af7-110">บัญชีส่วนบุคคลที่ได้รับเชิญให้เข้าร่วมผู้เช่า Azure AD จะใช้งาน ROPC ไม่ได้</span><span class="sxs-lookup"><span data-stu-id="49af7-110">Personal accounts that are invited to an Azure AD tenant can't use ROPC.</span></span>
    - <span data-ttu-id="49af7-111">บัญชีที่ไม่มีรหัสผ่านไม่สามารถลงชื่อเข้าใช้ผ่าน ROPC</span><span class="sxs-lookup"><span data-stu-id="49af7-111">Accounts that don't have passwords can't sign in through ROPC.</span></span> <span data-ttu-id="49af7-112">ในสถานการณ์สมมตินี้ เราขอแนะนนะให้คุณใช้โฟลว์ที่แตกต่างกันในแอปของคุณแทน</span><span class="sxs-lookup"><span data-stu-id="49af7-112">For this scenario, we recommend that you use a different flow for your app, instead.</span></span>
    - <span data-ttu-id="49af7-113">ถ้าผู้ใช้ต้องใช้ [การรับรองความถูกต้องโดยใช้หลายปัจจัย (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) เพื่อเข้าสู่ระบบแอปพลิเคชัน พวกเขาจะถูกบล็อก</span><span class="sxs-lookup"><span data-stu-id="49af7-113">If users need to use [multi-factor authentication (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) to log in to the application, they will be blocked.</span></span>
    - <span data-ttu-id="49af7-114">ROPC ไม่ได้รับการสนับสนุนในสถานการณ์ [การติดต่อกับภายนอก](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) ข้อมูลเฉพาะตัวแบบไฮบริด (ตัวอย่างเช่น Azure AD และ ADFS ที่ใช้เพื่อรับรองความถูกต้องของบัญชีภายในองค์กร)</span><span class="sxs-lookup"><span data-stu-id="49af7-114">ROPC is not supported in [hybrid identity federation](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) scenarios (for example, Azure AD and ADFS used to authenticate on-premises accounts).</span></span> <span data-ttu-id="49af7-115">ถ้าผู้ใช้เปลี่ยนเส้นทางแบบเต็มหน้าไปยังผู้ให้บริการข้อมูลเฉพาะตัวภายในองค์กร Azure AD จะไม่สามารถทดสอบชื่อผู้ใช้และรหัสผ่านกับผู้ให้บริการข้อมูลเฉพาะตัวนั้น</span><span class="sxs-lookup"><span data-stu-id="49af7-115">If users are full-page redirected to an on-premises identity provider, Azure AD is not able to test the username and password against that identity provider.</span></span> <span data-ttu-id="49af7-116">[อย่างไรก็ตาม การรับรองความถูกต้องแบบ](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) พาส-ผ่านได้รับการสนับสนุนกับ ROPC</span><span class="sxs-lookup"><span data-stu-id="49af7-116">[Pass-through authentication](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) is supported with ROPC, however.</span></span>
    - <span data-ttu-id="49af7-117">ข้อยกเว้นของสถานการณ์การติดต่อกับภายนอกของข้อมูลเอกลักษณ์แบบไฮบริดจะเป็นดังต่อไปนี้: นโยบาย Home Realm Discovery ที่มี **การตั้งค่า AllowCloudPasswordValidation** **เป็น TRUE** จะเปิดใช้งานโฟลว์ ROPC เพื่อใช้งานกับผู้ใช้ภายนอกเมื่อซิงค์รหัสผ่านภายในองค์กรกับระบบคลาวด์</span><span class="sxs-lookup"><span data-stu-id="49af7-117">An exception to a hybrid identity federation scenario would be the following: Home Realm Discovery policy with **AllowCloudPasswordValidation** set to **TRUE** will enable ROPC flow to work for federated users when on-premises password is synced to cloud.</span></span> <span data-ttu-id="49af7-118">For more information, see [Enable direct ROPC authentication of federrated users for legacy applications](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span><span class="sxs-lookup"><span data-stu-id="49af7-118">For more information, see [Enable direct ROPC authentication of federated users for legacy applications](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span></span> 
- <span data-ttu-id="49af7-119">แพลตฟอร์มข้อมูลเฉพาะตัวของ Microsoft และ [OAuth 2.0 On-Behalf-Of flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) - บทความนี้อธิบายวิธีการเขียนโปรแกรมโดยตรงกับโฟลว์ **ในนามของ (OBO)** ในแอปพลิเคชันของคุณ</span><span class="sxs-lookup"><span data-stu-id="49af7-119">[Microsoft identity platform and OAuth 2.0 On-Behalf-Of flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) - This article describes how to program directly against the **on-behalf-of (OBO) flow** in your application.</span></span>
- <span data-ttu-id="49af7-120">[แพลตฟอร์มข้อมูลเฉพาะตัวของไมโครซอฟท์](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) และโพรโทคอล OpenID Connect - บทความนี้แสดงวิธีการใช้โพรโทคอล OpenID Connect ที่ไม่ขึ้นกับภาษา และอธิบายวิธีการส่งและรับข้อความ HTTP โดยไม่ต้องใช้ไลบรารีโอเพนซอร์สใดๆ ของ Microsoft</span><span class="sxs-lookup"><span data-stu-id="49af7-120">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) - This article shows how to implement the OpenID Connect protocol independent of language, and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>

<span data-ttu-id="49af7-121">**เข้าถึงโทเค็น**</span><span class="sxs-lookup"><span data-stu-id="49af7-121">**Access Tokens**</span></span>

<span data-ttu-id="49af7-122">[โทเค็นการเข้าถึงแพลตฟอร์มข้อมูลเฉพาะตัวของ Microsoft](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) - เรียนรู้วิธีที่ API ของคุณสามารถตรวจสอบและใช้การอ้างสิทธิ์ภายในโทเค็นการเข้าถึง</span><span class="sxs-lookup"><span data-stu-id="49af7-122">[Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) - Learn how your API can validate and use the claims inside an access token.</span></span> <span data-ttu-id="49af7-123">เอกสารประกอบทั้งหมดในบทความนี้ ยกเว้นที่บันทึกที่บันทึกจะใช้ได้กับโทเค็นที่ออกให้กับ API ที่คุณได้ลงทะเบียนเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="49af7-123">All documentation in this article, except where noted, applies only to tokens issued for APIs you've registered.</span></span> <span data-ttu-id="49af7-124">ไม่สามารถใช้กับโทเค็นที่ออกให้กับ API ที่ Microsoft เป็นเจ้าของ หรือสามารถใช้โทเค็นเหล่านั้นเพื่อตรวจสอบวิธีที่แพลตฟอร์มข้อมูลเฉพาะตัวของ Microsoft จะออกโทเค็นให้กับ API ที่คุณสร้าง</span><span class="sxs-lookup"><span data-stu-id="49af7-124">It does not apply to tokens issued for Microsoft-owned APIs, nor can those tokens be used to validate how the Microsoft identity platform will issue tokens for an API you create.</span></span>

<span data-ttu-id="49af7-125">**การกําหนดค่าแอปพลิเคชัน**</span><span class="sxs-lookup"><span data-stu-id="49af7-125">**Application Configuration**</span></span>

<span data-ttu-id="49af7-126">[การเปลี่ยนเส้นทางข้อจํากัดและข้อจํากัด URI (URL](https://docs.microsoft.com/azure/active-directory/develop/reply-url) ตอบกลับ) - เรียนรู้วิธีกําหนดค่า URI การเปลี่ยนเส้นทาง (URL ตอบกลับ) ของคุณ</span><span class="sxs-lookup"><span data-stu-id="49af7-126">[Redirect URI (reply URL) restrictions and limitations](https://docs.microsoft.com/azure/active-directory/develop/reply-url) - Learn how to configure your Redirect URI (reply URL).</span></span> <span data-ttu-id="49af7-127">การเปลี่ยนเส้นทาง URI หรือ URL ตอบกลับ คือสถานที่ที่เซิร์ฟเวอร์การอนุญาตส่งผู้ใช้เมื่อแอปได้รับการอนุมัติแล้ว และให้รหัสการตรวจสอบหรือโทเค็นการเข้าถึง</span><span class="sxs-lookup"><span data-stu-id="49af7-127">A redirect URI, or reply URL, is the location where the authorization server sends the user once the app has been successfully authorized and granted an authorization code or access token.</span></span> <span data-ttu-id="49af7-128">เซิร์ฟเวอร์การรับรองความถูกต้องจะส่งโค้ดหรือโทเค็นไปยัง URI การเปลี่ยนเส้นทาง ดังนั้นคุณจึงต้องลงทะเบียนสถานที่ที่ถูกต้องให้เป็นส่วนหนึ่งของกระบวนการลงทะเบียนแอป</span><span class="sxs-lookup"><span data-stu-id="49af7-128">The authorization server sends the code or token to the redirect URI; so it's important you register the correct location as part of the app registration process.</span></span>

<span data-ttu-id="49af7-129">**การเตรียมใช้งานแอปพลิเคชัน**</span><span class="sxs-lookup"><span data-stu-id="49af7-129">**Application Provisioning**</span></span>

<span data-ttu-id="49af7-130">[บทช่วยสอน: พัฒนาและวางแผนการเตรียมใช้งาน](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) จุดสิ้นสุด SCIM - บทความนี้อธิบายวิธีการสร้างจุดสิ้นสุด SCIM และรวมกับบริการการเตรียมใช้งาน AAD</span><span class="sxs-lookup"><span data-stu-id="49af7-130">[Tutorial: Develop and plan provisioning for a SCIM endpoint](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) - This article describes how to build an SCIM endpoint and integrate with the AAD provisioning service.</span></span>


